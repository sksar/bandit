import{S as Qe,i as Ue,s as ze,a as T,e as v,b as Te,t as Ee,c as le,d as w,h as Ge,f as C,g as m,j as he,k as Re,l as me,m as h,o as p,p as G,q as ae,r as k,u as H,H as Ne,I as Ke,v as pe,w as He,x as Ve,y as Oe,z as Xe,J as Me,A as K,K as ke,L as ve}from"./index.5a1822b8.js";import{p as Ye}from"./stores.341856e7.js";import{p as Je,r as Pe,a as be}from"./stores.84469616.js";import{w as Ze}from"./paths.edd62e39.js";import{d as Ce}from"./index.0c99c3d9.js";import{s as et,Q as qe,I as tt,C as rt}from"./buildQuery.b342377d.js";import"./VennDiagram.svelte_svelte_type_style_lang.a7320854.js";import{D as st,B as Le,L as it}from"./LineChart.99e96f0e.js";import{Q as Ae}from"./QueryViewer.75989313.js";function nt(i){let s,t=_.title+"",r;return{c(){s=v("h1"),r=Ee(t),this.h()},l(n){s=C(n,"H1",{class:!0});var l=he(s);r=Re(l,t),l.forEach(m),this.h()},h(){h(s,"class","title")},m(n,l){p(n,s,l),G(s,r)},p:K,d(n){n&&m(s)}}}function ot(i){return{c(){this.h()},l(s){this.h()},h(){document.title="Evidence"},m:K,p:K,d:K}}function ut(i){let s,t,r,n,l;return document.title=s=_.title,{c(){t=T(),r=v("meta"),n=T(),l=v("meta"),this.h()},l(u){t=w(u),r=C(u,"META",{property:!0,content:!0}),n=w(u),l=C(u,"META",{name:!0,content:!0}),this.h()},h(){var u,f;h(r,"property","og:title"),h(r,"content",((u=_.og)==null?void 0:u.title)??_.title),h(l,"name","twitter:title"),h(l,"content",((f=_.og)==null?void 0:f.title)??_.title)},m(u,f){p(u,t,f),p(u,r,f),p(u,n,f),p(u,l,f)},p(u,f){f&0&&s!==(s=_.title)&&(document.title=s)},d(u){u&&m(t),u&&m(r),u&&m(n),u&&m(l)}}}function ft(i){var l,u;let s,t,r=(_.description||((l=_.og)==null?void 0:l.description))&&lt(),n=((u=_.og)==null?void 0:u.image)&&mt();return{c(){r&&r.c(),s=T(),n&&n.c(),t=Te()},l(f){r&&r.l(f),s=w(f),n&&n.l(f),t=Te()},m(f,R){r&&r.m(f,R),p(f,s,R),n&&n.m(f,R),p(f,t,R)},p(f,R){var M,g;(_.description||(M=_.og)!=null&&M.description)&&r.p(f,R),(g=_.og)!=null&&g.image&&n.p(f,R)},d(f){r&&r.d(f),f&&m(s),n&&n.d(f),f&&m(t)}}}function lt(i){let s,t,r,n,l;return{c(){s=v("meta"),t=T(),r=v("meta"),n=T(),l=v("meta"),this.h()},l(u){s=C(u,"META",{name:!0,content:!0}),t=w(u),r=C(u,"META",{property:!0,content:!0}),n=w(u),l=C(u,"META",{name:!0,content:!0}),this.h()},h(){var u,f,R;h(s,"name","description"),h(s,"content",_.description??((u=_.og)==null?void 0:u.description)),h(r,"property","og:description"),h(r,"content",((f=_.og)==null?void 0:f.description)??_.description),h(l,"name","twitter:description"),h(l,"content",((R=_.og)==null?void 0:R.description)??_.description)},m(u,f){p(u,s,f),p(u,t,f),p(u,r,f),p(u,n,f),p(u,l,f)},p:K,d(u){u&&m(s),u&&m(t),u&&m(r),u&&m(n),u&&m(l)}}}function mt(i){let s,t,r;return{c(){s=v("meta"),t=T(),r=v("meta"),this.h()},l(n){s=C(n,"META",{property:!0,content:!0}),t=w(n),r=C(n,"META",{name:!0,content:!0}),this.h()},h(){var n,l;h(s,"property","og:image"),h(s,"content",(n=_.og)==null?void 0:n.image),h(r,"name","twitter:image"),h(r,"content",(l=_.og)==null?void 0:l.image)},m(n,l){p(n,s,l),p(n,t,l),p(n,r,l)},p:K,d(n){n&&m(s),n&&m(t),n&&m(r)}}}function $e(i){let s,t;return s=new Ae({props:{queryID:"test_endpoints",queryResult:i[6]}}),{c(){le(s.$$.fragment)},l(r){me(s.$$.fragment,r)},m(r,n){ae(s,r,n),t=!0},p(r,n){const l={};n[0]&64&&(l.queryResult=r[6]),s.$set(l)},i(r){t||(k(s.$$.fragment,r),t=!0)},o(r){H(s.$$.fragment,r),t=!1},d(r){pe(s,r)}}}function We(i){let s,t;return s=new Ae({props:{queryID:"query",queryResult:i[5]}}),{c(){le(s.$$.fragment)},l(r){me(s.$$.fragment,r)},m(r,n){ae(s,r,n),t=!0},p(r,n){const l={};n[0]&32&&(l.queryResult=r[5]),s.$set(l)},i(r){t||(k(s.$$.fragment,r),t=!0)},o(r){H(s.$$.fragment,r),t=!1},d(r){pe(s,r)}}}function Ie(i){let s,t;return s=new Ae({props:{queryID:"rps",queryResult:i[4]}}),{c(){le(s.$$.fragment)},l(r){me(s.$$.fragment,r)},m(r,n){ae(s,r,n),t=!0},p(r,n){const l={};n[0]&16&&(l.queryResult=r[4]),s.$set(l)},i(r){t||(k(s.$$.fragment,r),t=!0)},o(r){H(s.$$.fragment,r),t=!1},d(r){pe(s,r)}}}function at(i){let s,t,r,n,l,u,f,R,M,g,A=i[0].test_endpoint+"",se,ie,_e,L,ne,Q,B,$,oe,V,O,X,P,Y,J,U,Z,z,q,ee,S=typeof _<"u"&&_.title&&_.hide_title!==!0&&nt();function W(e,o){return typeof _<"u"&&_.title?ut:ot}let j=W()(i),F=typeof _=="object"&&ft(),E=i[6]&&$e(i);L=new st({props:{title:"Select Endpoint",name:"test_endpoint",data:i[6],label:"item",value:"item",default:"download"}});let y=i[5]&&We(i),c=i[4]&&Ie(i);return O=new Le({props:{title:"Bandit",data:i[4],value:"rps_bandit",maxWidth:"10em"}}),P=new Le({props:{title:"Cowboy",data:i[4],value:"rps_cowboy",maxWidth:"10em"}}),q=new it({props:{title:"Requests Per Second - "+i[0].test_endpoint,subtitle:"(Higher is better)",data:i[5],series:"server",x:"Number of clients",y:"Requests per second (max)",xAxisTitle:"Number of clients",yAxisTitle:"Requests per second (max)",xGridlines:"true",yBaseline:"true",colorPalette:i[7]}}),{c(){S&&S.c(),s=T(),j.c(),t=v("meta"),r=v("meta"),F&&F.c(),n=Te(),l=T(),u=v("br"),f=T(),E&&E.c(),R=T(),M=v("div"),g=v("h2"),se=Ee(A),ie=Ee(" Benchmarks"),_e=T(),le(L.$$.fragment),ne=T(),y&&y.c(),Q=T(),c&&c.c(),B=T(),$=v("h3"),oe=Ee("Highest Requests Per Second"),V=T(),le(O.$$.fragment),X=T(),le(P.$$.fragment),Y=T(),J=v("br"),U=T(),Z=v("br"),z=T(),le(q.$$.fragment),this.h()},l(e){S&&S.l(e),s=w(e);const o=Ge("svelte-1j2izld",document.head);j.l(o),t=C(o,"META",{name:!0,content:!0}),r=C(o,"META",{name:!0,content:!0}),F&&F.l(o),n=Te(),o.forEach(m),l=w(e),u=C(e,"BR",{}),f=w(e),E&&E.l(e),R=w(e),M=C(e,"DIV",{class:!0});var x=he(M);g=C(x,"H2",{class:!0});var D=he(g);se=Re(D,A),ie=Re(D," Benchmarks"),D.forEach(m),_e=w(x),me(L.$$.fragment,x),x.forEach(m),ne=w(e),y&&y.l(e),Q=w(e),c&&c.l(e),B=w(e),$=C(e,"H3",{class:!0});var ue=he($);oe=Re(ue,"Highest Requests Per Second"),ue.forEach(m),V=w(e),me(O.$$.fragment,e),X=w(e),me(P.$$.fragment,e),Y=w(e),J=C(e,"BR",{}),U=w(e),Z=C(e,"BR",{}),z=w(e),me(q.$$.fragment,e),this.h()},h(){h(t,"name","twitter:card"),h(t,"content","summary"),h(r,"name","twitter:site"),h(r,"content","@evidence_dev"),h(g,"class","capitalize markdown"),h(M,"class","flex justify-between items-center mb-4"),h($,"class","markdown")},m(e,o){S&&S.m(e,o),p(e,s,o),j.m(document.head,null),G(document.head,t),G(document.head,r),F&&F.m(document.head,null),G(document.head,n),p(e,l,o),p(e,u,o),p(e,f,o),E&&E.m(e,o),p(e,R,o),p(e,M,o),G(M,g),G(g,se),G(g,ie),G(M,_e),ae(L,M,null),p(e,ne,o),y&&y.m(e,o),p(e,Q,o),c&&c.m(e,o),p(e,B,o),p(e,$,o),G($,oe),p(e,V,o),ae(O,e,o),p(e,X,o),ae(P,e,o),p(e,Y,o),p(e,J,o),p(e,U,o),p(e,Z,o),p(e,z,o),ae(q,e,o),ee=!0},p(e,o){typeof _<"u"&&_.title&&_.hide_title!==!0&&S.p(e,o),j.p(e,o),typeof _=="object"&&F.p(e,o),e[6]?E?(E.p(e,o),o[0]&64&&k(E,1)):(E=$e(e),E.c(),k(E,1),E.m(R.parentNode,R)):E&&(ke(),H(E,1,1,()=>{E=null}),Ne()),(!ee||o[0]&1)&&A!==(A=e[0].test_endpoint+"")&&Ke(se,A);const x={};o[0]&64&&(x.data=e[6]),L.$set(x),e[5]?y?(y.p(e,o),o[0]&32&&k(y,1)):(y=We(e),y.c(),k(y,1),y.m(Q.parentNode,Q)):y&&(ke(),H(y,1,1,()=>{y=null}),Ne()),e[4]?c?(c.p(e,o),o[0]&16&&k(c,1)):(c=Ie(e),c.c(),k(c,1),c.m(B.parentNode,B)):c&&(ke(),H(c,1,1,()=>{c=null}),Ne());const D={};o[0]&16&&(D.data=e[4]),O.$set(D);const ue={};o[0]&16&&(ue.data=e[4]),P.$set(ue);const te={};o[0]&1&&(te.title="Requests Per Second - "+e[0].test_endpoint),o[0]&32&&(te.data=e[5]),q.$set(te)},i(e){ee||(k(E),k(L.$$.fragment,e),k(y),k(c),k(O.$$.fragment,e),k(P.$$.fragment,e),k(q.$$.fragment,e),ee=!0)},o(e){H(E),H(L.$$.fragment,e),H(y),H(c),H(O.$$.fragment,e),H(P.$$.fragment,e),H(q.$$.fragment,e),ee=!1},d(e){S&&S.d(e),e&&m(s),j.d(e),m(t),m(r),F&&F.d(e),m(n),e&&m(l),e&&m(u),e&&m(f),E&&E.d(e),e&&m(R),e&&m(M),pe(L),e&&m(ne),y&&y.d(e),e&&m(Q),c&&c.d(e),e&&m(B),e&&m($),e&&m(V),pe(O,e),e&&m(X),pe(P,e),e&&m(Y),e&&m(J),e&&m(U),e&&m(Z),e&&m(z),pe(q,e)}}}const _={title:"WebSocket Benchmarks",protocol:"ws"},{title:Tt,protocol:re}=_;function Se(i,...s){return!!s.some(t=>t==null?void 0:t.__unset)}function pt(i,s,t){var De,ge,Fe,xe;let r,n,l,u,f,R,M,g,A,se,ie,_e,L,ne,Q,B,$=K,oe=()=>($(),$=ve(fe,a=>t(22,B=a)),fe),V,O=K,X=()=>(O(),O=ve(D,a=>t(23,V=a)),D),P,Y=K,J=()=>(Y(),Y=ve(c,a=>t(24,P=a)),c),U,Z;He(i,Ye,a=>t(25,U=a)),He(i,Pe,a=>t(36,Z=a)),i.$$.on_destroy.push(()=>$()),i.$$.on_destroy.push(()=>O()),i.$$.on_destroy.push(()=>Y());let{data:z}=s,{data:q={},customFormattingSettings:ee,__db:S,inputs:W}=z;Ve(Pe,Z="d634faf675851561a52cd02ca9b4d4fe",Z);let we=Ze(W);Oe(tt,we),Xe(we.subscribe(a=>t(0,W=a))),Oe(rt,{getCustomFormats:()=>ee.customFormats||[]});const j=(a,d)=>be(S.query,a,{query_name:d});et(j);const F=()=>{};let E=!1;(De=import.meta)!=null&&De.hot&&(void 0).on("vite:afterUpdate",()=>{E=!0,qe.emptyCache()}),U.params,(ge=import.meta)!=null&&ge.hot&&(void 0).on("evidence:queryChange",({queryId:a,content:d})=>{let b=[];if(a||b.push("Malformed event: Missing queryId"),d||b.push("Malformed event: Missing content"),b.length){console.warn("Failed to update query on serverside change!",b.join(`
`));return}a==="test_endpoints"&&t(20,r=d)});let y;Me(()=>t(10,y=r));let c;const e=()=>{const a=()=>{let d,b;try{if(u||E)d=void 0,b=void 0;else if(q.test_endpoints){if(q.test_endpoints instanceof Error)throw q.test_endpoints;d=q.test_endpoints}else d=be(S.query,r,{query_name:"test_endpoints"})}catch(de){d=[],b=de}const N=qe.create(r,j,"test_endpoints",{scoreNotifier:F,initialData:d,initialError:b,noResolve:n});let I;N.loaded||(I=N.fetch()),c&&I instanceof Promise?I.then(()=>J(t(1,c=N))):J(t(1,c=N))};return a(),Ce(a,500)};let o;(Fe=import.meta)!=null&&Fe.hot&&(void 0).on("evidence:queryChange",({queryId:a,content:d})=>{let b=[];if(a||b.push("Malformed event: Missing queryId"),d||b.push("Malformed event: Missing content"),b.length){console.warn("Failed to update query on serverside change!",b.join(`
`));return}a==="query"&&t(18,f=d)});let x;Me(()=>t(12,x=f));let D;const ue=()=>{const a=()=>{let d,b;try{if(g||E)d=void 0,b=void 0;else if(q.query){if(q.query instanceof Error)throw q.query;d=q.query}else d=be(S.query,f,{query_name:"query"})}catch(de){d=[],b=de}const N=qe.create(f,j,"query",{scoreNotifier:F,initialData:d,initialError:b,noResolve:R});let I;N.loaded||(I=N.fetch()),D&&I instanceof Promise?I.then(()=>X(t(2,D=N))):X(t(2,D=N))};return a(),Ce(a,500)};let te;(xe=import.meta)!=null&&xe.hot&&(void 0).on("evidence:queryChange",({queryId:a,content:d})=>{let b=[];if(a||b.push("Malformed event: Missing queryId"),d||b.push("Malformed event: Missing content"),b.length){console.warn("Failed to update query on serverside change!",b.join(`
`));return}a==="rps"&&t(16,A=d)});let ce;Me(()=>t(14,ce=A));let fe;const Be=()=>{const a=()=>{let d,b;try{if(_e||E)d=void 0,b=void 0;else if(q.rps){if(q.rps instanceof Error)throw q.rps;d=q.rps}else d=be(S.query,A,{query_name:"rps"})}catch(de){d=[],b=de}const N=qe.create(A,j,"rps",{scoreNotifier:F,initialData:d,initialError:b,noResolve:se});let I;N.loaded||(I=N.fetch()),fe&&I instanceof Promise?I.then(()=>oe(t(3,fe=N))):oe(t(3,fe=N))};return a(),Ce(a,500)};let ye;const je=["#8ABD00","#027BCE"];return i.$$set=a=>{"data"in a&&t(8,z=a.data)},i.$$.update=()=>{i.$$.dirty[0]&256&&t(9,{data:q={},customFormattingSettings:ee,__db:S}=z,q),i.$$.dirty[0]&512&&Je.set(Object.keys(q).length>0),i.$$.dirty[0]&33554432&&U.params,i.$$.dirty[0]&1049600&&(y||t(10,y=r)),i.$$.dirty[0]&1048576&&t(21,l=r),i.$$.dirty[0]&2098176&&(u=l!==y),i.$$.dirty[0]&1050624&&typeof o>"u"&&t(11,o=e()),i.$$.dirty[0]&1050624&&o(),i.$$.dirty[0]&2560,i.$$.dirty[0]&1&&t(18,f=`SELECT "server" as server, 
    "Number of clients", 
    "Requests per second (mean)",
    "Requests per second (max)",
    "Number of 2xx responses"
FROM results.data
WHERE "Test endpoint" = '${W.test_endpoint}'
AND "Protocol" = '${re}'
AND "Treeish" in ('master', 'main')`),i.$$.dirty[0]&1&&(R=Se`SELECT "server" as server, 
    "Number of clients", 
    "Requests per second (mean)",
    "Requests per second (max)",
    "Number of 2xx responses"
FROM results.data
WHERE "Test endpoint" = '${W.test_endpoint}'
AND "Protocol" = '${re}'
AND "Treeish" in ('master', 'main')`),i.$$.dirty[0]&266240&&(x||t(12,x=f)),i.$$.dirty[0]&262144&&t(19,M=f),i.$$.dirty[0]&528384&&(g=M!==x),i.$$.dirty[0]&270336&&typeof te>"u"&&t(13,te=ue()),i.$$.dirty[0]&270336&&te(),i.$$.dirty[0]&8704,i.$$.dirty[0]&1&&t(16,A=`SELECT * FROM
(SELECT max("Requests per second (max)") as rps_bandit, FROM (SELECT "server" as server, 
    "Number of clients", 
    "Requests per second (mean)",
    "Requests per second (max)",
    "Number of 2xx responses"
FROM results.data
WHERE "Test endpoint" = '${W.test_endpoint}'
AND "Protocol" = '${re}'
AND "Treeish" in ('master', 'main')) WHERE server = 'bandit'),
(SELECT max("Requests per second (max)") as rps_cowboy, FROM (SELECT "server" as server, 
    "Number of clients", 
    "Requests per second (mean)",
    "Requests per second (max)",
    "Number of 2xx responses"
FROM results.data
WHERE "Test endpoint" = '${W.test_endpoint}'
AND "Protocol" = '${re}'
AND "Treeish" in ('master', 'main')) WHERE server = 'cowboy')`),i.$$.dirty[0]&1&&(se=Se`SELECT * FROM
(SELECT max("Requests per second (max)") as rps_bandit, FROM (SELECT "server" as server, 
    "Number of clients", 
    "Requests per second (mean)",
    "Requests per second (max)",
    "Number of 2xx responses"
FROM results.data
WHERE "Test endpoint" = '${W.test_endpoint}'
AND "Protocol" = '${re}'
AND "Treeish" in ('master', 'main')) WHERE server = 'bandit'),
(SELECT max("Requests per second (max)") as rps_cowboy, FROM (SELECT "server" as server, 
    "Number of clients", 
    "Requests per second (mean)",
    "Requests per second (max)",
    "Number of 2xx responses"
FROM results.data
WHERE "Test endpoint" = '${W.test_endpoint}'
AND "Protocol" = '${re}'
AND "Treeish" in ('master', 'main')) WHERE server = 'cowboy')`),i.$$.dirty[0]&81920&&(ce||t(14,ce=A)),i.$$.dirty[0]&65536&&t(17,ie=A),i.$$.dirty[0]&147456&&(_e=ie!==ce),i.$$.dirty[0]&98304&&typeof ye>"u"&&t(15,ye=Be()),i.$$.dirty[0]&98304&&ye(),i.$$.dirty[0]&33280,i.$$.dirty[0]&16777216&&t(6,L=P),i.$$.dirty[0]&8388608&&t(5,ne=V),i.$$.dirty[0]&4194304&&t(4,Q=B)},t(20,r=`SELECT DISTINCT "Test endpoint" as item
FROM results.data
WHERE "Protocol" = '${re}'
AND "Treeish" in ('master', 'main')`),n=Se`SELECT DISTINCT "Test endpoint" as item
FROM results.data
WHERE "Protocol" = '${re}'
AND "Treeish" in ('master', 'main')`,[W,c,D,fe,Q,ne,L,je,z,q,y,o,x,te,ce,ye,A,ie,f,M,r,l,B,V,P,U]}class wt extends Qe{constructor(s){super(),Ue(this,s,pt,at,ze,{data:8},null,[-1,-1])}}export{wt as default};
