import{s as I}from"./index.0c99c3d9.js";import{a4 as x}from"./index.5a1822b8.js";import{B as l,f as _,i as w,a as h,b}from"./VennDiagram.svelte_svelte_type_style_lang.a7320854.js";const m="customFormattingSettings",R="_inputs";function T(e,...t){if(typeof e=="function")throw new Error("You must supply the data as the first argument to tidy()");let r=e;for(const n of t)n&&(r=n(r));return r}function y(e){return r=>{const n=[];for(const s of r){const f={...s};for(const i in e){const a=e[i],o=typeof a=="function"?a(f):a;f[i]=o}n.push(f)}return n}}function d(e){if(e&&typeof e=="string"){let t=e.split(" ");e.includes(":")||(e=e+"T00:00:00"),t.length>2&&(e=t[0]+" "+t[1]);const r=/\.([^\s]+)/;e=e.replace(r,""),e=e.replace("Z",""),e=e.replace(" ","T")}return e}function D(e,t){return e=T(e,y({[t]:r=>r[t]?new Date(d(r[t])):null})),e}function $(e,t){return e=T(e,y({[t]:r=>d(r[t])})),e}const g="axis",u="value",C=()=>{var e;return((e=x(m))==null?void 0:e.getCustomFormats())||[]},V=(e,t,r)=>{let n=N(e);if(t.evidenceType==="string")return;if(n){let f=C(),i=[...l,...f].find(a=>{var o,c;return((o=a.formatTag)==null?void 0:o.toLowerCase())===((c=n==null?void 0:n.toLowerCase)==null?void 0:c.call(n))});if(i)return i}let s=_(e,t,r);if(s)return s};function z(e,t=void 0){let r=e,n=C(),s=[...l,...n].find(i=>{var a,o;return((a=i.formatTag)==null?void 0:a.toLowerCase())===((o=r==null?void 0:r.toLowerCase)==null?void 0:o.call(r))}),f={};return s||(f={formatTag:"custom",formatCode:r},t&&(f.valueType=t),f)}const M=(e,t=void 0,r=void 0)=>{try{return p(e,t,r,u)}catch(n){return console.warn(`Unexpected error calling applyFormatting(${e}, ${t}, ${u}, ${r}). Error=${n}`),e}},X=(e,t=void 0,r=void 0)=>{try{return p(e,t,r,g)}catch{}return e},G=(e,t)=>{let r=e;if(e&&(t!=null&&t.formatTag)){let n=e.toLowerCase().lastIndexOf(`_${t.formatTag.toLowerCase()}`),s="";n>0&&(typeof(t==null?void 0:t.titleTagReplacement)=="string"&&(s=t.titleTagReplacement),r=e.substring(0,n)+s)}return r},E=e=>{switch(e){case"number":return 1234;case"date":return"2022-01-03";default:return}},k=e=>{var n,s;let r=((n=e.userInput)==null?void 0:n.trim())||e.exampleInput||E(e.valueType);if(r)try{let f;if(e.valueType==="number"){let i=Number(r);f={min:i,max:i,median:i,maxDecimals:((s=i.toString().split(".")[1])==null?void 0:s.length)||0,unitType:"number"}}return p(r,e,f,u)}catch{}return""};function p(e,t=void 0,r=void 0,n=u){if(e==null)return"-";let s;if(t)try{let f=O(t,n),i;try{t.valueType==="date"&&typeof e=="string"?i=new Date(d(e)):e instanceof Date?i=new Date(e.toISOString().slice(0,-1)):t.valueType==="number"&&typeof e!="number"&&!Number.isNaN(e)?i=Number(e):i=e}catch{i=e}if(w(t,f))try{s=h(i,t,r)}catch(a){console.warn(`Unexpected error applying auto formatting. Error=${a}`)}else s=I.format(f,i)}catch(f){console.warn(`Unexpected error applying formatting ${f}`)}return s===void 0&&(s=b(e)),s}function O(e,t=u){return typeof e=="string"?e:t===g&&(e!=null&&e.axisFormatCode)?e.axisFormatCode:e==null?void 0:e.formatCode}function N(e){let t=e.toLowerCase(),r=t.lastIndexOf("_");if(r>0)return t.substr(r).replace("_","")}export{R as I,G as a,X as b,D as c,k as d,E as e,M as f,z as g,V as l,y as m,$ as s,T as t};
